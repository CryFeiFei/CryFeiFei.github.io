{"title":"Qt在Linux下获取当前系统用户名","slug":"Qt在Linux下获取当前系统用户名","date":"2020-06-25T16:50:14.000Z","updated":"2020-06-26T02:35:40.405Z","comments":true,"path":"api/articles/Qt在Linux下获取当前系统用户名.json","excerpt":null,"covers":null,"content":"<p> Qt没有直接的接口去获取到当前系统用户名，只能够间接的通过现有的接口去获取。（比如下边的例子通过获取home路径）</p>\n<pre class=\" language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\" spellcheck=\"true\">//Qt4 version</span>\n\nQString <span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span> \n     QString userName <span class=\"token operator\">=</span> QDesktopServices<span class=\"token operator\">::</span><span class=\"token function\">storageLocation</span><span class=\"token punctuation\">(</span>QDesktopServices<span class=\"token operator\">::</span>HomeLocation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    userName <span class=\"token operator\">=</span> userName<span class=\"token punctuation\">.</span><span class=\"token function\">section</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">return</span> userName<span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token comment\" spellcheck=\"true\">//Qt5 version</span>\nQString <span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    QString userPath <span class=\"token operator\">=</span> QStandardPaths<span class=\"token operator\">::</span><span class=\"token function\">writableLocation</span><span class=\"token punctuation\">(</span>QStandardPaths<span class=\"token operator\">::</span>HomeLocation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n    QString userName <span class=\"token operator\">=</span> userPath<span class=\"token punctuation\">.</span><span class=\"token function\">section</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span> userName<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n","more":"<p> Qt没有直接的接口去获取到当前系统用户名，只能够间接的通过现有的接口去获取。（比如下边的例子通过获取home路径）</p>\n<pre><code class=\"cpp\">//Qt4 version\n\nQString getUserName()\n{ \n     QString userName = QDesktopServices::storageLocation(QDesktopServices::HomeLocation);\n    userName = userName.section(&quot;/&quot;, -1, -1); \n    return userName; \n}\n\n\n\n//Qt5 version\nQString getUserName()\n{\n    QString userPath = QStandardPaths::writableLocation(QStandardPaths::HomeLocation); \n\n    QString userName = userPath.section(&quot;/&quot;, -1, -1); return userName;\n}</code></pre>\n","categories":[],"tags":[{"name":"Qt","path":"api/tags/Qt.json"},{"name":"Linux","path":"api/tags/Linux.json"}]}