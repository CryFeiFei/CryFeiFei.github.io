{"title":"QImage转QByteArray","slug":"QImage转QByteArray","date":"2020-06-28T12:34:01.000Z","updated":"2020-06-28T13:02:10.324Z","comments":true,"path":"api/articles/QImage转QByteArray.json","excerpt":null,"covers":null,"content":"<pre class=\" language-cpp\"><code class=\"language-cpp\">\nQImage img_enrll<span class=\"token punctuation\">;</span>\nQByteArray arr<span class=\"token punctuation\">;</span>\nQBuffer <span class=\"token function\">buffer</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbuffer<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>QIODevice<span class=\"token operator\">::</span>WriteOnly<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nimg_enrll<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>buffer<span class=\"token punctuation\">,</span> <span class=\"token string\">\"yourformat\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>或者</p>\n<pre class=\" language-cpp\"><code class=\"language-cpp\">QByteArray arr <span class=\"token operator\">=</span> QByteArray<span class=\"token operator\">::</span><span class=\"token function\">fromRawData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">bits</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">byteCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n","more":"<pre><code class=\"cpp\">\nQImage img_enrll;\nQByteArray arr;\nQBuffer buffer(&amp;arr);\nbuffer.open(QIODevice::WriteOnly);\nimg_enrll.save(&amp;buffer, &quot;yourformat&quot;);\n</code></pre>\n<p>或者</p>\n<pre><code class=\"cpp\">QByteArray arr = QByteArray::fromRawData((const char*)img.bits(), img.byteCount());</code></pre>\n","categories":[{"name":"Qt","path":"api/categories/Qt.json"}],"tags":[{"name":"Qt","path":"api/tags/Qt.json"},{"name":"QImage","path":"api/tags/QImage.json"}]}